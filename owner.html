<!DOCTYPE html>
<html>
<head>
<title>Owner</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
<h2>Owner Control</h2>

<input id="race" type="number" placeholder="Race To">
<button onclick="updateRace()">Update Race</button>

<select id="format">
<option value="round_robin">Round Robin</option>
<option value="knockout">Knockout</option>
</select>
<button onclick="updateFormat()">Update Format</button>

</div>

<script src="supabase.js"></script>
<script src="app.js"></script>
<script>

async function protect(){
 const { data: { user } } = await supabaseClient.auth.getUser();
 if(!user){ location.href="login.html"; return; }

 const { data } = await supabaseClient
   .from("profiles")
   .select("role")
   .eq("id",user.id)
   .single();

 if(data.role!=="owner"){
   location.href="index.html";
 }
}

protect();

</script>

</body>
</html>
