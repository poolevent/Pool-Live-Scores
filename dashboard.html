<script>
async function checkRole(){

  const { data: { user } } = await supabaseClient.auth.getUser();

  // ðŸ”´ kalau belum login
  if (!user) {
    location.href = "login.html";
    return;
  }

  const { data, error } = await supabaseClient
    .from("profiles")
    .select("role")
    .eq("id", user.id)
    .single();

  if (error || !data) {
    alert("Profile not found");
    return;
  }

  if (data.role === "owner") location.href = "owner.html";
  else if (data.role === "admin") location.href = "admin.html";
  else location.href = "index.html";
}

checkRole();
</script>
